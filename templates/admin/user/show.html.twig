{% extends 'base.html.twig' %}

{% block title %}User details{% endblock %}

{% set role_mapping = {
    'ROLE_ADMIN': 'Administrator',
    'ROLE_USER': 'User',
} %}

{% block body %}
    <h1>User</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ user.id }}</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>{{ user.name }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ user.email }}</td>
            </tr>
            <tr>
                <th>Roles</th>
                {% set readable_roles = user.roles ? user.roles|map(role => role_mapping[role] ?? role)|join(', ') : '' %}
                <td>{{ readable_roles }}</td>
            </tr>
        </tbody>
    </table>

    <div class="d-flex gap-2">
        <a href="{{ path('app_user_index') }}" class="btn btn-secondary">Back to list</a>

        <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-warning">Edit</a>

        {{ include('admin/user/_delete_form.html.twig') }}
    </div>
{% endblock %}
